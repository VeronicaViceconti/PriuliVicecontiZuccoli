<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>S&amp;C</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="js/Login.js" charset="utf-8" defer></script>
<script src="utils.js" charset="utf-8" defer></script>
<link rel="stylesheet" type="text/css" media="all" href="css/index.css" />
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
</head>
<body>
   <div id="login">
   		<h1 class="text-center pt-5">Welcome to the S&amp;C website!</h1>
   		<h3 class="text-center" id="errors" style="color:red;"></h3>
		<br>
        <div class="container">
            <div id="login-row" class="row justify-content-center align-items-center">
                <div id="login-column" class="col-md-6">
                    <div id="login-box" class="col-md-12">
                        <form id="login-form" class="form" action="#" method="post">
                            <h3 class="text-center text-info">Login</h3>
                            <div class="form-group">
                                <label for="email" class="text-info">Email:</label><br>
                                <input type="email" name="email" id="email" class="form-control inputForm" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="pwd" class="text-info">Password:</label><br>
                                <input type="password" name="pwd" id="pwd" class="form-control inputForm" placeholder="Enter your password" required>
                            </div>
                            <div class="form-group">
                                <p class="text-info">Don't have an account?<a href="#" class="text-info" id="link-signin" style="text-decoration: underline;">Register here</a></p><br>
                                <div id="tocenter">
                                	<button type="submit" id="loginbutton" name="submit" class="btn btn-info btn-md ">Login!</button>
                            	</div>
                            </div>
                            
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="Signin" class="login" style="display:none;">
   		<h2 class="text-center pt-5">Hi! You can sign in here:</h2>
		<h3 class="text-center" id="signInError" style="color:red;"></h3>
        <div class="container">
            <div id="login-row" class="row justify-content-center align-items-center">
                <div id="login-column" class="col-md-6">
                    <div id="login-box" class="col-md-12">
                        <form id="formSignin" class="form" action="#" method="post">
                            <h3 class="text-center text-info">SignIn Form</h3>
                            <div class="form-group">
                                <label for="Email" class="text-info">Email:</label><br>
                                <input type="email" name="email" id="Email" class="form-control inputForm" placeholder="Enter an email" required>
                            </div>
                            <div class="form-group">
                                <label for="Username" class="text-info">Name:</label><br>
                                <input type="text" name="username" id="Username" class="form-control inputForm" placeholder="Enter an username" minlength="5" required>
                            </div>
                            <div class="form-group">
                                <label for="Address" class="text-info">Address:</label><br>
                                <input type="text" name="address" id="Address" class="form-control inputForm" placeholder="Enter your address " minlength="5" required>
                            </div>
                            <div class="form-group">
                                <label for="Phone-number" class="text-info">Phone number:</label><br>
                                <input type="tel" name="phoneNumber" id="Phone-number" class="form-control inputForm" placeholder="Enter your phone number" required>
                            </div>
                            <div class="form-group">
                            	<p class="text-info">Are you a student ?</p>
                            	<div style="margin-left:20px;"> 
                            		<input class="form-check-input" type="radio" name="isStudent" id="studentYes" value="yes" required>
        							<label class="form-check-label" for="studentYes">SÃ¬</label>
        						</div>
                                <div style="margin-left:20px;">
	                                <input class="form-check-input" type="radio" name="isStudent" id="studentNo" value="no" required>
	        						<label class="form-check-label" for="studentNo">No</label>
                                </div>
        						
                            </div>
                            <div id="showIfStudent">
                            	<div class="form-group">
	                                <label for="StudyCourse" class="text-info">Study Course:</label><br>
	                                <input type="text" name="StudyCourse" id="StudyCourse" class="form-control inputForm" placeholder="Enter your study course">
	                            </div>
                            </div>
                            <div class="form-group">
                                <label for="Pwd" class="text-info">Password:</label><br>
                                <input type="password" name="pwd" id="Pwd" class="form-control inputForm" placeholder="Enter a password" minlength="5" required>
                            </div>
                            <div class="form-group">
                                <label for="pwdSame" class="text-info">Same password:</label><br>
                                <input type="password" name="pwdSame" id="pwdSame" class="form-control inputForm" placeholder="Enter the same password" minlength="5" required>
                            </div>
                            <div class="form-group">
                                <p class="text-info">Already have an account?<a href="#" class="text-info" id="link-login" style="text-decoration: underline;">Login Here</a></p><br>
                                <div id="tocenter">
                                	<button type="submit" id="signinbutton" name="submit" class="btn btn-info btn-md ">Sign in!</button>
                            	</div>
                            </div>
                            
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <button id="sendBtn">send Notification</button>
    <script type="module">
	    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
	    import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-messaging.js";
	    
	    const firebaseConfig = {
	    	    apiKey: "AIzaSyAGyk2tmB0nHL1pLmwen13ojjH8CclCWkc",
	    	    authDomain: "studentsandcompanies-780ac.firebaseapp.com",
	    	    projectId: "studentsandcompanies-780ac",
	    	    storageBucket: "studentsandcompanies-780ac.firebasestorage.app",
	    	    messagingSenderId: "517678657535",
	    	    appId: "1:517678657535:web:5c50c910bd2c16c8c181ca",
	    	    measurementId: "G-8ZRC27SYMV"
	    	  };
	    
	    const app = initializeApp(firebaseConfig);
	    const messaging = getMessaging(app);
	    
	    navigator.serviceWorker.register("sw.js").then(registration => {
	    	getToken(messaging, { 
	    		serviceWorkerRegistration: registration,
	    		vapidKey: 'BBJchtTR2ahynNkWIvrDboxIGbD2gOT2EWzwcrbojvt1UZuvbIQ_fj1Hs9aIFVdHYm1N-1YHvdZIikhVibEGOHw' }).then((currentToken) => {
		    	  if (currentToken) {
		    		  //console.log("current token is: " + currentToken);
						sessionStorage.setItem("notifToken",currentToken );
		    	    // Send the token to your server and update the UI if necessary
		    	    // ...
		    	  } else {
		    	    // Show permission request UI
		    	    console.log('No registration token available. Request permission to generate one.');
		    	    // ...
		    	  }
		    	}).catch((err) => {
		    	  console.log('An error occurred while retrieving token. ', err);
		    	  // ...
		    	});
	    });
    </script>
</body>
</html>